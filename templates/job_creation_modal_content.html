<form id="job-creation-form" hx-post="{{ url_for('job.create_job') }}"
      hx-target="#job-list"
      hx-swap="innerHTML"
      hx-on--after-request="if(event.detail.successful) { document.getElementById('job-creation-modal').style.display='none'; document.getElementById('job-creation-form').reset(); } else { document.getElementById('form-errors-container').innerHTML = event.detail.xhr.response; }">
   <h2>Create New Job</h2>
   <div id="form-errors-container"></div>
   <div class="job-update-compact">
        <!-- Group 1: Time, Duration & Description (TOP) -->
        <div class="form-group">
            <div class="form-card time-card">
                <div class="card-header">
                    <span class="card-icon">ğŸ•</span>
                    <span class="card-title">Date & Time</span>
                </div>
                <div class="form-row">
                    <div class="form-field">
                        <label for="time">Start Time</label>
                        <input type="time" id="time" name="time" required pattern="^([01]\d|2[0-3]):[0-5]\d$" title="Please enter start time in 24-hour format (HH:mm)">
                    </div>
                    <div class="form-field">
                        <label for="end_time">End Time</label>
                        <input type="time" id="end_time" name="end_time" required pattern="^([01]\d|2[0-3]):[0-5]\d$" title="Please enter end time in 24-hour format (HH:mm)">
                    </div>
                    <div class="form-field">
                        <label for="date">Date</label>
                        <input type="date" id="date" name="date" value="{{ today.isoformat()}}" placeholder="Select Date">
                    </div>
                </div>
            </div>
            <div class="form-card description-card">
                <div class="card-header">
                    <span class="card-icon">ğŸ“</span>
                    <span class="card-title">Description</span>
                </div>
                <div class="form-field">
                    <textarea id="description" name="notes" rows="3" placeholder="Job description"></textarea>
                </div>
            </div>
        </div>
    
        <!-- Group 2: Property, Tenant & Access Details -->
        <div class="form-group">
            <div class="form-card address-card">
                <div class="card-header">
                    <span class="card-icon">ğŸ“</span>
                    <span class="card-title">Property</span>
                </div>
                <div class="form-field">
                    <select id="property_id" name="property_id" required>
                        {% for property in properties %}
                            <option value="{{ property.id }}">{{ property.address }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-card tenant-card">
                <div class="card-header">
                    <span class="card-icon">ğŸ‘¤</span>
                    <span class="card-title">Tenant</span>
                </div>
                <div class="form-field">
                    <label for="arrival_datetime">Tenant Arrival Date & Time</label>
                    <input type="datetime-local" id="arrival_datetime" name="arrival_datetime" placeholder="Select Date and Time">  
                </div>                  
            </div>
            <div class="form-card access-card">
                <div class="card-header">
                    <span class="card-icon">ğŸ”‘</span>
                    <span class="card-title">Access</span>
                </div>
                <div class="form-field">
                    <textarea rows="2" placeholder="Access notes will appear here" readonly></textarea>
                </div>
            </div>
        </div>
    
        <!-- Group 3: Teams & Cleaners -->
        <div class="form-group">
            <div class="form-card teams-card">
                <div class="card-header">
                    <span class="card-icon">ğŸ‘¥</span>
                    <span class="card-title">Teams</span>
                </div>
                <div class="form-field">
                    <select id="assigned_teams" name="assigned_teams" multiple>
                        {% for team in teams %}
                            <option value="{{ team.id }}">{{ team.name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-card cleaners-card">
                <div class="card-header">
                    <span class="card-icon">ğŸ§¹</span>
                    <span class="card-title">Cleaners</span>
                </div>
                <div class="form-field">
                    <select id="assigned_cleaners" name="assigned_cleaners" multiple>
                        {% for user in users %}
                            <option value="{{ user.id }}">{{ user.username }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>
    
        <div class="form-actions">
            <button type="submit" class="button save-button">
                ğŸ’¾ Create Job
            </button>
            <button type="button" class="button" onclick="document.getElementById('job-creation-modal').style.display='none'">Cancel</button>
        </div>
    </div>
</form>