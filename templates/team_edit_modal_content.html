<form id="editTeamForm" class="form-card" hx-post="/teams/team/{{ team.id }}/edit" hx-target="#team-modal-content" hx-swap="outerHTML">
    <h2>Edit Team</h2>
    <input type="hidden" id="editTeamId" name="team_id" value="{{ team.id }}">

    <div class="form-group">
        <label for="editTeamName">Team Name:</label>
        <input type="text" id="editTeamName" name="team_name" value="{{ team.name }}" required>
    </div>

    <div class="form-group">
        <label for="editTeamMembers">Add/Remove Members:</label>
        <select id="editTeamMembers" name="members" multiple>
            {% for user in users %}
                <option value="{{ user.id }}"
                        data-team-id="{{ user.team_id | default('') }}"
                        {% if user.team_id and user.team_id != team.id %}disabled{% endif %}
                        {% if user in team.members %}selected{% endif %}>
                    {{ user.username }} {% if user.team_id and user.team_id != team.id %}(Team {{ user.team_id }}){% endif %}
                </option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label for="editTeamLeader">Select Team Leader:</label>
        <select id="editTeamLeader" name="team_leader_id">
            <option value="">No Leader</option> {# Option to clear leader #}
            {% for user in users %}
                <option value="{{ user.id }}"
                        data-team-id="{{ user.team_id | default('') }}"
                        {% if user.team_id and user.team_id != team.id %}disabled{% endif %}
                        {% if user.id == team.team_leader_id %}selected{% endif %}>
                    {{ user.username }} {% if user.team_id and user.team_id != team.id %}(Team {{ user.team_id }}){% endif %}
                </option>
            {% endfor %}
        </select>
    </div>

    <button type="submit" class="btn btn-primary">Save Changes</button>
</form>