{% extends "base.html" %}

{% block title %}Job Details{% endblock %}

{% block content %}
    <div class="container">
        <h1>Job Details: {{ job.job_title }}</h1>
        <p><strong>Date:</strong> {{ job.date }}</p>
        <p><strong>Time:</strong> {{ job.time }}</p>
        <p><strong>Duration:</strong> {{ job.duration }}</p>
        <p><strong>Assigned Cleaners:</strong>
            {% for cleaner_id in job.assigned_cleaners %}
                {{ users[cleaner_id].name }}{% if not loop.last %}, {% endif %}
            {% endfor %}
        </p>
        <p><strong>Description:</strong> {{ job.description }}</p>

        {% if user_role == "Team Leader" %}
            <h2>Report</h2>
            <form action="{{ url_for('job_detail', job_id=job.id) }}" method="post">
                <textarea name="report" rows="5" cols="30">{{ job.report }}</textarea><br>
                <button type="submit">Save Report</button>
            </form>
        {% else %}
            <p><strong>Report:</strong> {{ job.report if job.report else "No report yet." }}</p>
        {% endif %}
        <p><a href="{{ url_for('timetable') }}" class="button">Back to Timetable</a></p>
    </div>
{% endblock %}